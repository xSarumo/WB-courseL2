# Grep Utility

Утилита фильтрации текстового потока (аналог команды grep).

## Описание

Программа читает входной поток (STDIN или файл) и выводит строки, соответствующие заданному шаблону (подстроке или регулярному выражению).

## Сборка

```bash
go build -o grep ./cmd/app
```

## Использование

```bash
./grep [FLAGS] --pattern PATTERN [--file FILE]
```

Если файл не указан, программа читает из STDIN.

## Поддерживаемые флаги

- `-A N` / `--after-context N` — после каждой найденной строки дополнительно вывести N строк после неё (контекст)
- `-B N` / `--before-context N` — вывести N строк до каждой найденной строки
- `-C N` / `--context N` — вывести N строк контекста вокруг найденной строки (эквивалентно -A N -B N)
- `-c` / `--count` — выводить только количество строк, совпадающих с шаблоном
- `-i` / `--ignore-case` — игнорировать регистр
- `-v` / `--invert-match` — инвертировать фильтр: выводить строки, не содержащие шаблон
- `-F` / `--fixed-strings` — воспринимать шаблон как фиксированную строку, а не регулярное выражение
- `-n` / `--line-number` — выводить номер строки перед каждой найденной строкой

## Примеры использования

### Базовый поиск
```bash
./grep --pattern "hello" --file test.txt
```

### Поиск без учета регистра
```bash
./grep -i --pattern "hello" --file test.txt
```

### Вывод с номерами строк
```bash
./grep -n --pattern "hello" --file test.txt
```

### Подсчет совпадений
```bash
./grep -c --pattern "hello" --file test.txt
```

### Контекст вокруг найденных строк
```bash
./grep -C 2 --pattern "hello" --file test.txt
```

### Инвертированный поиск (строки, не содержащие шаблон)
```bash
./grep -v --pattern "hello" --file test.txt
```

### Поиск фиксированной строки (без регулярных выражений)
```bash
./grep -F --pattern "test[123]" --file test.txt
```

### Регулярные выражения
```bash
./grep --pattern "^[HR]" --file test.txt
```

### Чтение из STDIN
```bash
echo -e "line1\npattern\nline3" | ./grep --pattern "pattern"
```

### Комбинация флагов
```bash
./grep -C 2 -n -i --pattern "hello" --file test.txt
```

## Структура проекта

```
.
├── cmd/
│   └── app/
│       └── main.go          # Точка входа приложения
├── pkg/
│   ├── config/
│   │   └── config.go        # Конфигурация и структуры данных
│   ├── grep/
│   │   └── grep.go          # Основная логика grep
│   ├── parser/
│   │   └── parser.go        # Парсер аргументов командной строки
│   └── reader/
│       └── reader.go        # Чтение файлов и STDIN
├── go.mod
└── README.md
```

## Особенности реализации

### Обработка контекста
- Программа корректно обрабатывает случаи, когда контекст выходит за границы файла
- При пересечении контекстных диапазонов строки не дублируются
- Контекстные строки и строки совпадения различаются внутри программы

### Поддержка регулярных выражений
- По умолчанию шаблон интерпретируется как регулярное выражение
- Флаг `-F` переключает в режим точного совпадения подстроки
- Флаг `-i` добавляет модификатор `(?i)` для регулярных выражений

### Обработка ошибок
- Программа корректно обрабатывает ошибки при чтении файлов
- Некорректные регулярные выражения приводят к выводу сообщения об ошибке
- Возвращает соответствующие коды выхода при ошибках

## Тестирование

Код отформатирован с помощью `gofmt` и проверен с помощью `go vet`:

```bash
gofmt -w .
go vet ./...
```

## Отличия от стандартного grep

Реализация старается максимально соответствовать поведению UNIX grep, но имеет следующие упрощения:
- Не поддерживается вывод разделителей `--` между группами контекста
- Контекстные строки не помечаются специальным символом (`:` vs `-`)
- Упрощенная обработка некоторых крайних случаев

## Лицензия

Учебный проект для курса Wildberries
